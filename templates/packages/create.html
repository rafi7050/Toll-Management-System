{% extends 'layouts/default/main.html' %}
{% load crispy_forms_tags %}

{% block page_title %}
    {% if form.instance.pk %}
        Update
    {% else %}
        Add
    {% endif %} Package {% endblock %}

{% block content %}

    <div class="row">
        <div class="col-12 col-md-12 col-lg-12">
            <div class="flat">
                <form action="" method="post" enctype="multipart/form-data">
                    <div class="card-body">
                        {% crispy form %}
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block css %}
{% endblock css %}
{% block js %}
    <script>
        $(function () {
            set_cure_disease_fields()
            $('html').on('change', '[name="is_cure_disease_package"]', function () {
                set_cure_disease_fields()
            })
        });

        let set_cure_disease_fields = function () {
            let is_cure_disease_package = $('[name="is_cure_disease_package"]').val()
            if (string_to_boolean(is_cure_disease_package)) {
                {#$('[name="nutrition_point"]').prop('disabled', false)#}
                {#$('[name="size"]').prop('disabled', true).find('option').prop('selected',false)#}

                $('[name="nutrition_point"]').prop('required', true)
                $('[name="size"]').prop('required', false).find('option').prop('selected',false)

                $('#div_id_nutrition_point').show()
                $('#div_id_size').hide()
            } else {
                $('[name="nutrition_point"]').prop('required', false).find('option').prop('selected',false)
                $('[name="size"]').prop('required', true)

                $('#div_id_nutrition_point').hide()
                $('#div_id_size').show()
            }
        }
    </script>
{% endblock js %}